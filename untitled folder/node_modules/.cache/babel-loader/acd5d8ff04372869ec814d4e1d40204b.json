{"ast":null,"code":"var _jsxFileName = \"/Users/liwentian/Desktop/PumpkinMovie1/FRONTEND 2/src/shared/components/FormElements/Buy.js\";\nimport React, { useState, useEffect } from 'react';\nimport Card from '../UIElements/Card';\nimport { useParams } from 'react-router-dom';\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport Button from './Button';\nimport './Buy.css';\nconst [LoadedDes, setLoadedDes] = useState();\nconst [isLoading, setisLoading] = useState(false);\nconst [error, setError] = useState();\ntoast.configure();\n\nconst Buy = props => {\n  let movie = useParams().movieid;\n  let theatre = useParams().theatreid;\n  let moviename = useParams().moviename;\n  let theatrename = useParams().theatrename;\n  const [product] = React.useState({\n    movieid: movie,\n    theatreid: theatre,\n    moviename: moviename,\n    theatrename: theatrename,\n    price: 15\n  });\n  const buttonstyle = {\n    background: \"#FF7417\",\n    backgroundImage: \"#FF7417\"\n  };\n  useEffect(() => {\n    const fetchMovie = async () => {\n      setisLoading(true);\n\n      try {\n        console.log(product.movieid);\n        const response = await fetch(`https://localhost:5000/api/movies/${product.movieid}`);\n        const responseData = await response.json();\n        console.log(responseData);\n\n        if (!response.ok) {\n          console.log(responseData);\n          throw new Error(responseData.message);\n        }\n\n        setLoadedDes(responseData.movie);\n      } catch (err) {\n        setError(err.message);\n      }\n\n      setisLoading(false);\n    };\n\n    fetchMovie();\n  }, [product]);\n\n  async function handleToken(token) {\n    const response = await axios.post('http://localhost:5000/cart', {\n      token,\n      product\n    });\n    const {\n      status\n    } = response.data;\n\n    if (status === 'success') {\n      toast(\"Success! Check email for details!\", {\n        type: \"success\"\n      });\n    } else {\n      toast(\"Something went wrong\", {\n        type: \"error\"\n      });\n    }\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, !isLoading && LoadedDes && React.createElement(Card, {\n    className: \"ticket\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    className: \"tickettitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Your Ticket\"))), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    className: \"ticketline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Movie: \", product.moviename)), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    className: \"ticketline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Location: \", product.theatrename)), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    className: \"ticketline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Price: $\", product.price)), React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(StripeCheckout, {\n    stripeKey: \"pk_test_P75FnWrf1B5LPGyovDcsMfok00OAcSj1KQ\",\n    token: handleToken,\n    billingAddress: true,\n    shippingAddress: true,\n    amount: product.price * 100,\n    name: product.movieid,\n    style: buttonstyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })))));\n};\n\nexport default Buy;","map":{"version":3,"sources":["/Users/liwentian/Desktop/PumpkinMovie1/FRONTEND 2/src/shared/components/FormElements/Buy.js"],"names":["React","useState","useEffect","Card","useParams","StripeCheckout","axios","toast","Button","LoadedDes","setLoadedDes","isLoading","setisLoading","error","setError","configure","Buy","props","movie","movieid","theatre","theatreid","moviename","theatrename","product","price","buttonstyle","background","backgroundImage","fetchMovie","console","log","response","fetch","responseData","json","ok","Error","message","err","handleToken","token","post","status","data","type"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport Card from '../UIElements/Card';\nimport { useParams } from 'react-router-dom';\nimport StripeCheckout from 'react-stripe-checkout';\n\nimport axios from \"axios\";\nimport {toast} from \"react-toastify\";\nimport Button from './Button';\nimport './Buy.css';\nconst [LoadedDes, setLoadedDes] = useState();\nconst [isLoading,setisLoading] = useState(false);\nconst [error, setError] = useState();\ntoast.configure();\nconst Buy = props => {\n    let movie = useParams().movieid;\n    let theatre =useParams().theatreid;\n    let moviename= useParams().moviename;\n    let theatrename = useParams().theatrename;\n    const [product] = React.useState(\n      {\n      movieid:movie,\n      theatreid:theatre,\n      moviename:moviename,\n      theatrename:theatrename,\n      price:15},\n    )\n    const buttonstyle={\n      background:\"#FF7417\",\n      backgroundImage:\"#FF7417\"\n    }\n    useEffect(() => {\n      const fetchMovie = async () => {\n       setisLoading(true);\n       try{          \n         console.log(product.movieid);\n         const response= await fetch(`https://localhost:5000/api/movies/${product.movieid}`); \n         const responseData = await response.json();\n         console.log(responseData)\n         if(!response.ok){\n           console.log(responseData)\n           throw new Error(responseData.message);\n         }\n         setLoadedDes(responseData.movie);        \n       } catch (err) {\n         setError(err.message);\n       }\n       setisLoading(false);\n     };\n \n     fetchMovie();\n   },[product]);\n\n\n\n async function handleToken(token){\n\n const response = await axios.post('http://localhost:5000/cart',{token,product});\n const {status} = response.data\n if(status === 'success'){\n   toast(\"Success! Check email for details!\",{type:\"success\"});\n }else{\n   toast(\"Something went wrong\",{type:\"error\"});\n }\n}\n  return (\n    <React.Fragment>\n    {!isLoading && LoadedDes && <Card className=\"ticket\">\n      <table>\n  <tr>\n      <td className=\"tickettitle\"><strong>Your Ticket</strong>\n      </td>\n   \n  </tr>\n  <tr>\n  <td className=\"ticketline\">\n    Movie: {product.moviename}\n      </td>\n\n  </tr>\n  <tr>\n    <td className=\"ticketline\">\n    Location: {product.theatrename}\n    </td>\n  </tr>  \n  <tr>\n    <td className=\"ticketline\">\n    Price: ${product.price}\n    </td>\n  </tr>  \n  <tr>\n    <StripeCheckout \n    stripeKey=\"pk_test_P75FnWrf1B5LPGyovDcsMfok00OAcSj1KQ\"\n    token={handleToken}\n    billingAddress\n    shippingAddress\n    amount={product.price * 100}\n    name={product.movieid}\n    style={buttonstyle}\n    />\n  </tr>\n\n \n </table>\n    </Card>}\n    </React.Fragment>);\n\n\n}\n\nexport default Buy;"]},"metadata":{},"sourceType":"module"}
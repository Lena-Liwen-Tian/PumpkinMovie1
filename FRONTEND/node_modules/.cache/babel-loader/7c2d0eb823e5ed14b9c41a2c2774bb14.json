{"ast":null,"code":"var _jsxFileName = \"/Users/liwentian/Downloads/PumpkinMovie1/FRONTEND/src/shared/components/FormElements/Buy.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router-dom';\nimport StripeCheckout from 'react-stripe-checkout';\nimport LoadingSpinner from '../UIElements/LoadingSpinner';\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { useHttpClient } from '../hooks/http-hook';\nimport './Buy.css';\n\nconst Buy = props => {\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const [LoadedDes, setLoadedDes] = useState();\n  toast.configure();\n  let movieid = useParams().movieid;\n  let theatre = useParams().theatreid;\n  let moviename = useParams().moviename;\n  let theatrename = useParams().theatrename;\n  let showtime = useParams().showtime;\n  const [product] = React.useState({\n    movieid: movieid,\n    theatreid: theatre,\n    moviename: moviename,\n    theatrename: theatrename,\n    price: 15\n  });\n  const buttonstyle = {\n    background: \"#FF7417\",\n    backgroundImage: \"#FF7417\"\n  };\n  useEffect(() => {\n    const fetchMovie = async () => {\n      console.log(movieid);\n\n      try {\n        const responseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + `/movies/${movieid}`);\n        setLoadedDes(responseData.movie);\n      } catch (err) {}\n    };\n\n    fetchMovie();\n  }, [movieid]);\n\n  async function handleToken(token) {\n    const response = await axios.post('https://pumpkinphasethree.herokuapp.com/cart', {\n      token,\n      product\n    });\n    const {\n      status\n    } = response.data;\n\n    if (status === 'success') {\n      toast(\"Success! Check email for details!\", {\n        type: \"success\"\n      });\n    } else {\n      toast(\"Something went wrong\", {\n        type: \"error\"\n      });\n    }\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, isLoading && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(LoadingSpinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  })), !isLoading && LoadedDes && React.createElement(\"div\", {\n    className: \"ticket\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row no-gutters\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: LoadedDes.Poster,\n    className: \"ticketmg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/description/${movieid}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    className: \"ticket--title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, LoadedDes.Title)), React.createElement(\"p\", {\n    className: \"ticket--des\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, LoadedDes.Plot), React.createElement(Link, {\n    to: `/${theatre}/theaterinfo`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    className: \"ticket--title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Location: \", theatrename)), React.createElement(\"h6\", {\n    className: \"ticket--title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Time: \", showtime), React.createElement(\"h6\", {\n    className: \"ticket--title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Price: $\", product.price), React.createElement(StripeCheckout, {\n    stripeKey: \"pk_test_P75FnWrf1B5LPGyovDcsMfok00OAcSj1KQ\",\n    token: handleToken,\n    billingAddress: true,\n    shippingAddress: true,\n    amount: product.price * 100,\n    name: product.movieid,\n    style: buttonstyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }))))));\n};\n\nexport default Buy;","map":{"version":3,"sources":["/Users/liwentian/Downloads/PumpkinMovie1/FRONTEND/src/shared/components/FormElements/Buy.js"],"names":["React","useState","useEffect","Link","useParams","StripeCheckout","LoadingSpinner","axios","toast","useHttpClient","Buy","props","isLoading","error","sendRequest","clearError","LoadedDes","setLoadedDes","configure","movieid","theatre","theatreid","moviename","theatrename","showtime","product","price","buttonstyle","background","backgroundImage","fetchMovie","console","log","responseData","process","env","REACT_APP_BACKEND_URL","movie","err","handleToken","token","response","post","status","data","type","Poster","Title","Plot"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router-dom';\nimport StripeCheckout from 'react-stripe-checkout';\nimport LoadingSpinner from '../UIElements/LoadingSpinner';\nimport axios from \"axios\";\nimport {toast} from \"react-toastify\";\nimport { useHttpClient } from '../hooks/http-hook';\nimport './Buy.css';\n\nconst Buy = props => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const [LoadedDes, setLoadedDes] = useState();\ntoast.configure();\n    let movieid = useParams().movieid;\n    let theatre =useParams().theatreid;\n    let moviename= useParams().moviename;\n    let theatrename = useParams().theatrename;\n    let showtime = useParams().showtime;\n\n    const [product] = React.useState(\n      {\n      movieid:movieid,\n      theatreid:theatre,\n      moviename:moviename,\n      theatrename:theatrename,\n      price:15},\n    )\n    const buttonstyle={\n      background:\"#FF7417\",\n      backgroundImage:\"#FF7417\"\n    }\n    useEffect(() => {\n      const fetchMovie = async () => {\n      console.log(movieid);\n       try{          \n         const responseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + `/movies/${movieid}`);\n  \n         setLoadedDes(responseData.movie);   \n      \n       } catch (err) {\n         \n       }\n     };\n \n     fetchMovie();\n   },[movieid]);\n\n\n async function handleToken(token){\n const response = await axios.post('https://pumpkinphasethree.herokuapp.com/cart',{token,product});\n const {status} = response.data\n if(status === 'success'){\n   toast(\"Success! Check email for details!\",{type:\"success\"});\n }else{\n   toast(\"Something went wrong\",{type:\"error\"});\n }\n}\n  return (\n    <React.Fragment>\n      {isLoading && (<div><LoadingSpinner /></div>)}\n    {!isLoading && LoadedDes && \n    <div className=\"ticket\">\n    <div className=\"row no-gutters\">\n      <div>  \n      <img src= {LoadedDes.Poster} className=\"ticketmg\" />\n      </div>\n      <div>\n           <div>\n\n           \n           <Link to={`/description/${movieid}`}><h6 className=\"ticket--title\">{LoadedDes.Title}</h6></Link>\n           <p className=\"ticket--des\">{LoadedDes.Plot}</p>\n           <Link to={`/${theatre}/theaterinfo`}><h6 className=\"ticket--title\">Location: {theatrename}</h6></Link>\n    <h6 className=\"ticket--title\">Time: {showtime}</h6>\n    <h6 className=\"ticket--title\">Price: ${product.price}</h6>\n           <StripeCheckout \n    stripeKey=\"pk_test_P75FnWrf1B5LPGyovDcsMfok00OAcSj1KQ\"\n    token={handleToken}\n    billingAddress\n    shippingAddress\n    amount={product.price * 100}\n    name={product.movieid}\n    style={buttonstyle}\n    />\n           \n            </div>\n        </div>\n      </div>\n    </div>\n\n}</React.Fragment>);\n\n\n}\n\nexport default Buy;"]},"metadata":{},"sourceType":"module"}
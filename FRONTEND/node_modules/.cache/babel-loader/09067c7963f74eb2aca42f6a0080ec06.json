{"ast":null,"code":"var _jsxFileName = \"/Users/liwentian/Downloads/PumpkinMovie1/FRONTEND/src/showtimes/pages/ShowTime.js\";\nimport React, { useEffect, useState } from 'react';\nimport ShowTimeList from '../components/ShowTimeList';\nimport { useParams } from 'react-router-dom';\nimport Calendar from '../components/calendar';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport Sortbutton from '../../shared/components/UIElements/Sort';\nimport Searchbutton from '../../shared/components/UIElements/Search';\nimport Filterbutton from '../../shared/components/UIElements/Filter';\nimport './Showtime.css';\n\nconst ShowTime = props => {\n  function tolower(a) {\n    return a.title.toLowerCase();\n  }\n\n  function standard(character) {\n    return character.replace(/\\s/g, '').toLowerCase();\n  }\n\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const timeid = useParams().timeid;\n  const [LoadedShowtimes, setLoadedShowtimes] = useState();\n  const [Sort, setSort] = useState(\"\");\n  const [Filter, setFilter] = useState(\"\");\n  const [Search, setSearch] = useState(\"\");\n  const [originalmovies, setoriginalmovies] = useState([]);\n  useEffect(() => {\n    const fetchShowtimes = async () => {\n      try {\n        const responseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + `/showtimes/${timeid}`);\n        setLoadedShowtimes(responseData.showtimes);\n        setoriginalmovies(responseData.showtimes);\n      } catch (err) {}\n    };\n\n    fetchShowtimes();\n  }, [timeid]);\n\n  const sortby = method => {\n    let movies;\n\n    if (method === \"Title (A-Z)\") {\n      movies = LoadedShowtimes.sort((a, b) => {\n        setSort(method);\n        if (tolower(a) < tolower(b)) return -1;\n        if (tolower(a) > tolower(a)) return 1;\n        return 0;\n      });\n    } else if (method === \"Time\") {\n      setSort(method);\n      movies = LoadedShowtimes.sort((a, b) => {\n        return parseInt(a.time.split(\":\")[0]) - parseInt(b.time.split(\":\")[0]);\n      });\n    }\n\n    setLoadedShowtimes(movies);\n  };\n\n  const searchmovie = e => {\n    setSearch(e);\n    let title;\n    let location;\n    title = originalmovies.filter(contact => {\n      return standard(contact.title).indexOf(standard(e)) !== -1;\n    });\n    location = originalmovies.filter(contact => {\n      return contact.theatre.name.replace(/\\s/g, '').toLowerCase().split(',').join('').indexOf(e.replace(/\\s/g, '').toLowerCase()) !== -1;\n    });\n    setLoadedShowtimes(title.length > 0 ? title : location);\n  };\n\n  const elements = {\n    \"Time\": {\n      \"Time\": [\"Morning\", \"Afternoon\", \"Evening\", \"All\"]\n    }\n  };\n\n  const changeFilter = (k, v) => {\n    let movies;\n    let valuearr = v.split(\" \");\n\n    if (k === \"Time\") {\n      setFilter(\"Time\");\n      let value = valuearr[valuearr.length - 1];\n\n      if (valuearr[0] === \"All\") {\n        movies = originalmovies;\n      } else if (valuearr[0] === \"Morning\") {\n        movies = originalmovies.filter(contact => parseInt(contact.time.split(\":\")[0]) < 12);\n      } else if (valuearr[0] === \"Afternoon\") {\n        movies = originalmovies.filter(contact => parseInt(contact.time.split(\":\")[0]) <= 18 && parseInt(contact.time.split(\":\")[0]) > 12);\n      } else if (valuearr[0] === \"Evening\") {\n        movies = originalmovies.filter(contact => parseInt(contact.time.split(\":\")[0]) > 18);\n      }\n    }\n\n    setLoadedShowtimes(movies);\n  };\n\n  useEffect(() => {\n    const updatePosts = () => {\n      setLoadedShowtimes(LoadedShowtimes);\n    };\n\n    updatePosts();\n  }, [LoadedShowtimes, Sort, Filter, Search]);\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"showtimesubtitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(Sortbutton, {\n    className: \"sortbutton\",\n    items: [\"Title (A-Z)\", \"Time\"],\n    sortby: sortby,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    className: \"tablecontent2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(Searchbutton, {\n    placeholder: \"Search by movie title or theatre name\",\n    change: searchmovie,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })), React.createElement(\"td\", {\n    className: \"tablecontent3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(Filterbutton, {\n    title: \"Time\",\n    elements: elements.Time,\n    filterby: changeFilter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })))), React.createElement(Calendar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), !isLoading && LoadedShowtimes && React.createElement(ShowTimeList, {\n    items: LoadedShowtimes,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }));\n};\n\nexport default ShowTime;","map":{"version":3,"sources":["/Users/liwentian/Downloads/PumpkinMovie1/FRONTEND/src/showtimes/pages/ShowTime.js"],"names":["React","useEffect","useState","ShowTimeList","useParams","Calendar","useHttpClient","Sortbutton","Searchbutton","Filterbutton","ShowTime","props","tolower","a","title","toLowerCase","standard","character","replace","isLoading","error","sendRequest","clearError","timeid","LoadedShowtimes","setLoadedShowtimes","Sort","setSort","Filter","setFilter","Search","setSearch","originalmovies","setoriginalmovies","fetchShowtimes","responseData","process","env","REACT_APP_BACKEND_URL","showtimes","err","sortby","method","movies","sort","b","parseInt","time","split","searchmovie","e","location","filter","contact","indexOf","theatre","name","join","length","elements","changeFilter","k","v","valuearr","value","updatePosts","Time"],"mappings":"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","sourcesContent":["import React, { useEffect,useState } from 'react';\nimport ShowTimeList from '../components/ShowTimeList';\nimport { useParams } from 'react-router-dom';\nimport Calendar from '../components/calendar';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport Sortbutton from '../../shared/components/UIElements/Sort';\nimport Searchbutton from '../../shared/components/UIElements/Search';\nimport Filterbutton from '../../shared/components/UIElements/Filter';\n\nimport './Showtime.css';\n\n    const ShowTime = props => {\n      function tolower(a){\n        return a.title.toLowerCase();\n      }\n      function standard(character){\n        return character.replace(/\\s/g,'').toLowerCase();\n   \n      }\n\n      const { isLoading, error, sendRequest, clearError } = useHttpClient();\n      const timeid = useParams().timeid;\n      const [LoadedShowtimes, setLoadedShowtimes] = useState();\n  const [Sort,setSort] = useState(\"\");\n  const[Filter,setFilter] = useState(\"\");\n  const[Search,setSearch] = useState(\"\");\n  const[originalmovies,setoriginalmovies]=useState([]);\n\n\n      useEffect(() => {\n        \n         const fetchShowtimes = async () => {\n          try{                  \n            const responseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + `/showtimes/${timeid}`);\n            setLoadedShowtimes(responseData.showtimes);\n            setoriginalmovies(responseData.showtimes)          \n          } catch (err) {          \n          }\n        };\n\n        fetchShowtimes();\n      },[timeid]);\n      \n      const sortby = method => {\n        let movies;\n        if(method === \"Title (A-Z)\"){\n           movies =  LoadedShowtimes.sort((a,b)=>{\n           setSort(method);\n           if(tolower(a) < tolower(b)) return -1;\n           if(tolower(a) > tolower(a)) return 1;\n           return 0;\n         })\n\n        }else if(method === \"Time\"){\n          setSort(method);\n          movies =  LoadedShowtimes.sort((a,b)=>{\n          return parseInt(a.time.split(\":\")[0]) - parseInt(b.time.split(\":\")[0]);\n         })\n        }\n        setLoadedShowtimes(movies);\n        \n      }\n   \n     const searchmovie = e =>{ \n       \n       setSearch(e);\n       let title;\n       let location;\n       title = originalmovies.filter((contact) =>{\n         return standard(contact.title).indexOf(standard(e)) !== -1 ;\n       });\n       location = originalmovies.filter((contact) =>{\n       return contact.theatre.name.replace(/\\s/g,'').toLowerCase().split(',').join('').indexOf(e.replace(/\\s/g,'').toLowerCase()) !== -1 ;\n      });\n      setLoadedShowtimes(title.length > 0 ? title:location);\n     }\n     const elements = {\n       \"Time\":{\"Time\":[\"Morning\",\"Afternoon\",\"Evening\",\"All\"]},\n     }\n     const changeFilter = (k,v) => {\n       let movies;\n       let valuearr = v.split(\" \");\n      if(k === \"Time\"){\n        setFilter(\"Time\");     \n        let value = valuearr[valuearr.length-1];\n        if(valuearr[0]===\"All\") {\n         movies = originalmovies;\n       }\n        else if(valuearr[0] === \"Morning\"){\n           movies = originalmovies.filter((contact)=>parseInt(contact.time.split(\":\")[0]) < 12);\n        }else if(valuearr[0] === \"Afternoon\"){   \n           movies = originalmovies.filter((contact)=>parseInt(contact.time.split(\":\")[0]) <= 18 && parseInt(contact.time.split(\":\")[0]) > 12);\n        }else if(valuearr[0] === \"Evening\"){\n          movies = originalmovies.filter((contact)=>parseInt(contact.time.split(\":\")[0]) >18);\n       }\n       \n      }\n      setLoadedShowtimes(movies);\n   }\n       \n   useEffect(()=>{\n    const updatePosts=()=>{ \n    setLoadedShowtimes(LoadedShowtimes)};\n    updatePosts()},[LoadedShowtimes,Sort,Filter,Search]);\n      return (        \n      <React.Fragment>\n        <table className=\"showtimesubtitle\">\n      <tr>\n        <td>\n      <Sortbutton className=\"sortbutton\" items={[\"Title (A-Z)\",\"Time\"]} sortby={sortby} />\n      </td>  \n        <td className=\"tablecontent2\">\n       <Searchbutton placeholder = \"Search by movie title or theatre name\" change={searchmovie}/>\n        </td>\n        <td className=\"tablecontent3\">\n        <Filterbutton title= \"Time\" elements={elements.Time} filterby={changeFilter}/>\n        </td>\n        </tr>\n      </table>\n      <Calendar />\n      {!isLoading && LoadedShowtimes&&<ShowTimeList items={LoadedShowtimes}/>}\n      </React.Fragment>);\n};\n\n\n\nexport default ShowTime;"]},"metadata":{},"sourceType":"module"}